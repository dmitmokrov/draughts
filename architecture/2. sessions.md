## Архитектура игровых сессий

### Режимы игровых сессий

#### 1. Обучающий режим (тренер-ученик)

- Возможность тренера демонстрировать позиции
- Интерактивное обучение с комментариями
- Возможность приостановки и разбора позиции
- Подсказки и объяснения ходов

#### 2. Самостоятельная практика

- Игра против ИИ с различными уровнями сложности
- Решение задач из библиотеки упражнений
- Анализ завершенных партий
- Рекомендации по улучшению

#### 3. Решение задач

- Работа с предопределенными позициями
- Проверка правильности решений
- Объяснение правильного решения
- Возможность подсказок

### Архитектура компонентов

#### 1. GameSessionManager (Менеджер игровых сессий)

- **GameSessionManager.ts** - основной класс управления игровыми сессиями
  - Свойства:
    - `sessionId` - идентификатор сессии
    - `gameState` - текущее состояние игры
    - `players` - участники сессии
    - `sessionType` - тип сессии (обучающая, практика, задача)
    - `createdAt` - время создания сессии
- Методы:
  - `startSession()` - запуск сессии
  - `endSession()` - завершение сессии
  - `saveSession()` - сохранение сессии в базу данных
  - `resumeSession()` - восстановление сессии

#### 2. GameEngine (Игровой движок)

- **GameEngine.ts** - ядро игровой логики
  - Свойства:
    - `board` - текущее состояние доски
    - `currentPlayer` - текущий игрок
    - `moveHistory` - история ходов
    - `isGameOver` - состояние завершения игры
  - Методы:
    - `makeMove(move)` - выполнение хода
    - `getPossibleMoves()` - получение возможных ходов
    - `checkGameStatus()` - проверка статуса игры
    - `undoMove()` - отмена хода

#### 3. AIPlayer (И-игрок)

- **AIPlayer.ts** - класс для ИИ-противника
- Свойства:
  - `difficultyLevel` - уровень сложности
  - `thinkingTime` - время на размышление
- Методы:
  - `calculateBestMove(gameState)` - расчет лучшего хода
  - `evaluatePosition(position)` - оценка позиции
  - `getMove(gameState)` - получить ход ИИ

### Типы игровых сессий

#### 1. Обучающая сессия

- Специфические функции:
  - Пауза/воспроизведение игры
  - Комментирование ходов
  - Возможность отката ходов
  - Объяснение стратегии
  - Режим "следующий ход ученика" vs "ход тренера"

#### 2. Практическая сессия

- Специфические функции:
  - Игра против ИИ
  - Таймер (опционально)
  - Анализ ошибок
  - Статистика по игре

#### 3. Сессия решения задач

- Специфические функции:
  - Проверка ходов на правильность
  - Подсказки при неправильных ходах
- Оценка решения
- Возможность просмотра правильного решения

### Хранение и восстановление сессий

#### Сохранение прогресса

- Использование Firebase для хранения:
  - Истории ходов
  - Комментариев
  - Статуса задачи
  - Времени сессии

#### Восстановление сессий

- Возможность продолжения прерванной сессии
- Загрузка предыдущих игр для анализа
- Восстановление неоконченных задач
